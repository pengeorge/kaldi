# include common settings for limitedLP systems.
. conf/common.limitedLP || exit 1;

#speech corpora files location
train_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/training/
train_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/train.limitedLP.list
train_nj=48 #16

#for augmented data (Mar 9, 2014  chenzp)
train_da_data_dir=/home/chenzp/extra_data/babel/107b-v0.7/conversational/sub-train
train_da_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/train_da.limitedLP.list
train_da_nj=48

#for untranscribed data (Mar 16, 2014  chenzp)
train_unt_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/training/
train_unt_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/train_unt.limitedLP.list
unsup_nj=48
#train_unt_nj=48

#RADICAL DEV data files
dev2h_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/dev
dev2h_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/dev.2hr.list
dev2h_data_cmudb= # /home/kaldi/data/babel/splits/Vietnamese_Babel107/uem/conv-eval/db-v8-utt.dat
dev2h_data_msiipstm=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.stm
dev2h_stm_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.stm
dev2h_ecf_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev.ecf.xml
dev2h_rttm_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.mitllfa3.rttm
dev2h_kwlist_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-eval.kwlist3.xml # /home/kaldi/data/babel/splits/Vietnamese_Babel107/keywords.expanded.cmu.v2.xml
dev2h_subset_ecf=true
dev2h_nj=26 #27    cannot exceed the number of sph files, which is 26 in my dev2h list (chenzp Feb 26,2014)

#Official DEV data files
dev10h_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/dev/
dev10h_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/dev.list
dev10h_data_cmudb= # /home/kaldi/data/babel/splits/Vietnamese_Babel107/uem/conv-eval/db-v8-utt.dat
dev10h_data_msiipstm=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.stm
dev10h_stm_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.stm
dev10h_ecf_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev.ecf.xml
dev10h_rttm_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-dev/IARPA-babel107b-v0.7_conv-dev.mitllfa3.rttm
dev10h_kwlist_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-eval.kwlist3.xml # /home/kaldi/data/babel/splits/Vietnamese_Babel107/keywords.expanded.cmu.v2.xml
dev10h_nj=48 #32


#Official EVAL period evaluation data files
eval_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/eval/
eval_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/eval.list
eval_data_cmudb= # /home/kaldi/data/babel/splits/Vietnamese_Babel107/uem/conv-eval/db-v8-utt.dat
eval_ecf_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-eval.ecf.xml
eval_kwlist_file=/home/kaldi/data/babel/scoring/IndusDB/IARPA-babel107b-v0.7_conv-eval.kwlist3.xml
eval_nj=96 #81

#Official (POST-)EVAL evaluation data portion
evalpart1_data_dir=/home/kaldi/data/babel/107b-v0.7/conversational/eval/
evalpart1_data_list=/home/kaldi/data/babel/splits/Vietnamese_Babel107/evalpart1.list
evalpart1_data_cmudb=
evalpart1_data_msiipstm=/home/kaldi/data/babel/IndusDB.old/babel107b-v0.7_conv-evalpart1/babel107b-v0.7_conv-evalpart1.stm
evalpart1_stm_file=/home/kaldi/data/babel/IndusDB.old/babel107b-v0.7_conv-evalpart1/babel107b-v0.7_conv-evalpart1.stm
evalpart1_ecf_file=/home/kaldi/data/babel/IndusDB.old/babel107b-v0.7_conv-evalpart1.ecf.xml
evalpart1_rttm_file=/home/kaldi/data/babel/IndusDB.old/babel107b-v0.7_conv-evalpart1/babel107b-v0.7_conv-evalpart1.mitllfa3.rttm
evalpart1_kwlist_file=/home/kaldi/data/babel/IndusDB.old/babel107b-v0.7_conv-evalpart1.kwlist3.xml
declare -A evalpart1_more_kwlists
evalpart1_more_kwlists=(
                 )
                     #[1gram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.1gram.xml
                     #[mgram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.mgram.xml
                     #[invocab]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.invocab.xml
                     #[invocab_1gram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.invocab_1gram.xml
                     #[invocab_mgram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.invocab_mgram.xml
                     #[outvocab]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.outvocab.xml
                     #[outvocab_1gram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.outvocab_1gram.xml
                     #[outvocab_mgram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.outvocab_mgram.xml
declare -A evalpart1_subset_kwlists
evalpart1_subset_kwlists=(
  [1gram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.1gram.xml
  [mgram]=/home/kaldi/data/babel/scoring/more_kwlists/IARPA-babel107b-v0.7_conv-eval.kwlist3.mgram.xml
)
evalpart1_nj=48 #21

# Acoustic model parameters
numLeavesTri1=1000
numGaussTri1=10000
numLeavesTri2=2500
numGaussTri2=36000
numLeavesTri3=2500
numGaussTri3=36000
numLeavesMLLT=2500
numGaussMLLT=36000
numLeavesSAT=2500
numGaussSAT=36000
numGaussUBM=750
numLeavesSGMM=5000
numGaussSGMM=18000

# Lexicon and Language Model parameters
oovSymbol="<unk>"
lexiconFlags="--oov <unk>"

# Scoring protocols (dummy GLM file to appease the scoring script)
#glmFile=./conf/glm
lexicon_file=/home/kaldi/data/babel/107b-v0.7/conversational/reference_materials/lexicon.sub-train.txt

phoneme_mapping="i@U=i @ U;oaI=o a I;oaI:=o a I:;u@I=u @ I;uI@= u I @;1@I=1 @ I;1@U=1 @ U;
  a:I=a: I; a:U=a: U; aU=a U; @U=@ U; aI=a I; @I=@ I; EU=E U; eU=e U; i@=i @; iU=i U; Oa:=O a: ; Oa=O a; 
  OE=O E; OI=O I; oI=o I; @:I=@: I; u@=u @; 1@=1 @; ue=u e; uI=u I; 1I=1 I; u@:=u @:; 1U=1 U; ui:=u i:"
# 
position_dependent_phones=true

make_proxy_stochastic=true
oov_phone_cutoff=5
iv_phone_cutoff=3
proxy_weight=0.5    # available only when make_proxy_stochastic is set to true
original_weight=0.5 # available only when make_proxy_stochastic is set to true
use_total_weight=false # use total weight when proxy/original FST is empty

#keyword search settings
duptime=0.5
case_insensitive=true

